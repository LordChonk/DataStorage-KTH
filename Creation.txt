CREATE TABLE Payment (
 PaymentID VARCHAR(10) NOT NULL,
 Payment_Data VARCHAR(20),
 Amount  FLOAT(10),
 PersonID VARCHAR(10) NOT NULL
);

ALTER TABLE Payment ADD CONSTRAINT PK_Payment PRIMARY KEY (PaymentID);


CREATE TABLE Person (
 PersonID VARCHAR(10) NOT NULL,
 Name VARCHAR(20) NOT NULL,
 Address VARCHAR(50) NOT NULL,
 Contact_Details VARCHAR(50),
 PersonNumber NUMERIC(12) NOT NULL,
 Role VARCHAR(10) NOT NULL
);

ALTER TABLE Person ADD CONSTRAINT PK_Person PRIMARY KEY (PersonID);


CREATE TABLE Pricing (
 Price_list FLOAT(10) NOT NULL,
 Level VARCHAR(20) NOT NULL,
 sibling_discount VARCHAR(10) NOT NULL,
 type VARCHAR(10) NOT NULL
);


CREATE TABLE Student (
 StudentID VARCHAR(10) NOT NULL,
 SiblingID VARCHAR(50),
 Nr_Rented_Instruments INT NOT NULL
);

ALTER TABLE Student ADD CONSTRAINT PK_Student PRIMARY KEY (StudentID);


CREATE TABLE Student_Payment	 (
 PaymentID VARCHAR(10) NOT NULL,
 StudentID VARCHAR(10) NOT NULL
);

ALTER TABLE Student_Payment	 ADD CONSTRAINT PK_Student_Payment	 PRIMARY KEY (PaymentID);


CREATE TABLE Instructor (
 InstructorID VARCHAR(10) NOT NULL,
 Instruments_Taught VARCHAR(30) NOT NULL
);

ALTER TABLE Instructor ADD CONSTRAINT PK_Instructor PRIMARY KEY (InstructorID);


CREATE TABLE Instructor_Payment (
 PaymentID VARCHAR(10) NOT NULL,
 InstructorID VARCHAR(10) NOT NULL
);

ALTER TABLE Instructor_Payment ADD CONSTRAINT PK_Instructor_Payment PRIMARY KEY (PaymentID);


CREATE TABLE Instrument_Rental (
 RentalID VARCHAR(10) NOT NULL,
 Instrument VARCHAR(50),
 Rental_Start_Date DATE,
 Rental_End_Date DATE,
 StudentID VARCHAR(10) NOT NULL,
 Rental_Cost FLOAT(10)
);

ALTER TABLE Instrument_Rental ADD CONSTRAINT PK_Instrument_Rental PRIMARY KEY (RentalID);


CREATE TABLE Lesson (
 LessonID CHAR(10) NOT NULL,
 Lesson_Type VARCHAR(10) NOT NULL,
 Level VARCHAR(20) NOT NULL,
 Instrument VARCHAR(20) NOT NULL,
 Time_Slot TIMESTAMP(6) NOT NULL,
 Max_Students INT NOT NULL,
 Min_Students INT NOT NULL,
 Current_Enrolled INT NOT NULL,
 InstructorID VARCHAR(10) NOT NULL
);

ALTER TABLE Lesson ADD CONSTRAINT PK_Lesson PRIMARY KEY (LessonID);


CREATE TABLE Solo (
 SoloID VARCHAR(10) NOT NULL
);

ALTER TABLE Solo ADD CONSTRAINT PK_Solo PRIMARY KEY (SoloID);


CREATE TABLE student_lesson (
 StudentID VARCHAR(10) NOT NULL,
 LessonID CHAR(10) NOT NULL,
 SiblingID VARCHAR(20)
);

ALTER TABLE student_lesson ADD CONSTRAINT PK_student_lesson PRIMARY KEY (StudentID,LessonID);


CREATE TABLE Ensemble (
 EnsembleID VARCHAR(10) NOT NULL,
 Target_Genre VARCHAR(10) NOT NULL
);

ALTER TABLE Ensemble ADD CONSTRAINT PK_Ensemble PRIMARY KEY (EnsembleID);


CREATE TABLE Group_Lesson (
 Group_LessonID VARCHAR(10) NOT NULL
);

ALTER TABLE Group_Lesson ADD CONSTRAINT PK_Group_Lesson PRIMARY KEY (Group_LessonID);


ALTER TABLE Student ADD CONSTRAINT FK_Student_0 FOREIGN KEY (StudentID) REFERENCES Person (PersonID);


ALTER TABLE Student_Payment	 ADD CONSTRAINT FK_Student_Payment	_0 FOREIGN KEY (PaymentID) REFERENCES Payment (PaymentID);
ALTER TABLE Student_Payment	 ADD CONSTRAINT FK_Student_Payment	_1 FOREIGN KEY (StudentID) REFERENCES Student (StudentID);


ALTER TABLE Instructor ADD CONSTRAINT FK_Instructor_0 FOREIGN KEY (InstructorID) REFERENCES Person (PersonID);


ALTER TABLE Instructor_Payment ADD CONSTRAINT FK_Instructor_Payment_0 FOREIGN KEY (PaymentID) REFERENCES Payment (PaymentID);
ALTER TABLE Instructor_Payment ADD CONSTRAINT FK_Instructor_Payment_1 FOREIGN KEY (InstructorID) REFERENCES Instructor (InstructorID);


ALTER TABLE Instrument_Rental ADD CONSTRAINT FK_Instrument_Rental_0 FOREIGN KEY (StudentID) REFERENCES Student (StudentID);


ALTER TABLE Lesson ADD CONSTRAINT FK_Lesson_0 FOREIGN KEY (InstructorID) REFERENCES Instructor (InstructorID);



ALTER TABLE Solo ADD CONSTRAINT FK_Solo_0 FOREIGN KEY (SoloID) REFERENCES Lesson (LessonID);


ALTER TABLE student_lesson ADD CONSTRAINT FK_student_lesson_0 FOREIGN KEY (StudentID) REFERENCES Student (StudentID);
ALTER TABLE student_lesson ADD CONSTRAINT FK_student_lesson_1 FOREIGN KEY (LessonID) REFERENCES Lesson (LessonID);


ALTER TABLE Ensemble ADD CONSTRAINT FK_Ensemble_0 FOREIGN KEY (EnsembleID) REFERENCES Lesson (LessonID);


ALTER TABLE Group_Lesson ADD CONSTRAINT FK_Group_Lesson_0 FOREIGN KEY (Group_LessonID) REFERENCES Lesson (LessonID);


